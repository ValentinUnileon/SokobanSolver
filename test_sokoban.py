import unittest
import main

class TestSokoban(unittest.TestCase):



    def test_getCharPositionXY(self):
        self.assertEqual(main.getCharPositionXY(self.puzzle_lines), (3, 4))
        self.assertEqual(main.getCharPositionXY(self.puzzle_lines2), (15, 4))

    def test_isMovementValid(self):
        self.assertEqual(main.isMovementValid(15, 3, self.puzzle_lines2), False)
        self.assertEqual(main.isMovementValid(15, 5, self.puzzle_lines2), True)
        self.assertEqual(main.isMovementValid(15, 4, self.puzzle_lines3), False) #aunque tenga un punto en la horizontal a la que se va a mover el mov no es valido
        self.assertEqual(main.isMovementValid(9, 2, self.puzzle_lines4), False)  #caso en el que se mete a una vertical con paredes colindantes y sin objetivos
        self.assertEqual(main.isMovementValid(9, 2, self.puzzle_lines5), True)   #caso anterior pero con objetivo en la vertial
        self.assertEqual(main.isMovementValid(7, 4, self.puzzle_lines6), True)   #caso que se mueve abajo a la horizontal y tiene un objetivo
        self.assertEqual(main.isMovementValid(7, 4, self.puzzle_lines7), False)   #caso que se mueve abajo a la horizontal y NO tiene un objetivo
        self.assertEqual(main.isMovementValid(2, 4, self.puzzle_lines8), False)
        self.assertEqual(main.isMovementValid(2, 4, self.puzzle_lines9), False)
        #self.assertEqual(main.isMovementValid(7, 4, self.puzzle_lines10), False) #FALLO

    def test_updatePuzzle(self):

        xP, yP=main.getCharPositionXY(self.puzzle_lines_Normal_Movement)
        self.assertEqual(main.updatePuzzle(xP, yP, xP+1, yP, self.puzzle_lines_Normal_Movement), self.puzzle_lines_Normal_Movement_result)
        self.assertEqual(main.updatePuzzle(xP, yP, xP+1, yP, self.puzzle_lines_box_Movement), self.puzzle_lines_box_Movement_result)

        resultado=main.updatePuzzle(xP, yP, xP, yP+1, self.puzzle_lines_box_MovementDown)
        for i in resultado:
            print(i)

        self.assertEqual(resultado, self.puzzle_lines_box_MovementDown_result)

    #Puzzle for updatePuzzle
        
        
    puzzle_lines_Normal_Movement = [
    ['X', 'X', 'X', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '\n'],
    ['X', 'X', 'X', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', '#', '#', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '!', '#', '#', '#', '#', '\n'],
    ['#', ' ', ' ', '@', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '.', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#']
    ]

    puzzle_lines_Normal_Movement_result = [
    ['X', 'X', 'X', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '\n'],
    ['X', 'X', 'X', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', '#', '#', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '!', '#', '#', '#', '#', '\n'],
    ['#', ' ', ' ', ' ', '@', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '.', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#']
    ]

    #

    puzzle_lines_box_Movement = [
    ['X', 'X', 'X', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '\n'],
    ['X', 'X', 'X', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', '#', '#', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '!', '#', '#', '#', '#', '\n'],
    ['#', ' ', ' ', '@', '$', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '.', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#']
    ]

    puzzle_lines_box_Movement_result = [
    ['X', 'X', 'X', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '\n'],
    ['X', 'X', 'X', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', '#', '#', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '!', '#', '#', '#', '#', '\n'],
    ['#', ' ', ' ', ' ', '@', '$', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '.', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#']
    ]

    #

    puzzle_lines_box_MovementDown = [
    ['X', 'X', 'X', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '\n'],
    ['X', 'X', 'X', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', '#', '#', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', ' ', ' ', ' ', '@', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '!', '#', '#', '#', '#', '\n'],
    ['#', ' ', ' ', ' ', '$', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '.', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#']
    ]

    puzzle_lines_box_MovementDown_result = [
    ['X', 'X', 'X', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '\n'],
    ['X', 'X', 'X', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', '#', '#', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '!', '#', '#', '#', '#', '\n'],
    ['#', ' ', ' ', ' ', '@', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', ' ', ' ', ' ', '$', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '.', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#']
    ]




    #######
        
    puzzle_lines_BoxMovement = [
    ['X', 'X', 'X', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '\n'],
    ['X', 'X', 'X', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', '#', '#', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '!', '#', '#', '#', '#', '\n'],
    ['#', ' ', ' ', '@', '$', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '.', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#']
    ]

    puzzle_lines_BoxMovement_result = [
    ['X', 'X', 'X', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '\n'],
    ['X', 'X', 'X', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', '#', '#', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '!', '#', '#', '#', '#', '\n'],
    ['#', ' ', ' ', ' ', '@', '$', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '.', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#']
    ]

    #######




    #Puzzle for isMovementValid()

    puzzle_lines = [
    ['X', 'X', 'X', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '\n'],
    ['X', 'X', 'X', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', '#', '#', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '!', '#', '#', '#', '#', '\n'],
    ['#', ' ', ' ', '@', '$', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '.', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#']
    ]


    puzzle_lines2 = [
    ['X', 'X', 'X', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '\n'],
    ['X', 'X', 'X', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', '#', '#', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '#', '#', '#', '\n'],
    ['#', ' ', ' ', ' ', '$', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '@', ' ', '#', '\n'],
    ['#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '.', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#']
    ]

    puzzle_lines3 = [
    ['X', 'X', 'X', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '\n'],
    ['X', 'X', 'X', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', '#', '#', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '#', '#', '#', '\n'],
    ['#', ' ', ' ', ' ', '$', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '@', '$', ' ', '#', '\n'],
    ['#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '.', ' ', ' ', ' ', '.', '#', '\n'],
    ['#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#']
    ]

    puzzle_lines4 = [
    ['X', 'X', 'X', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '\n'],
    ['X', 'X', 'X', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', '#', '#', '#', ' ', ' ', ' ', ' ', ' ', '$', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '@', ' ', ' ', ' ', ' ', '#', '#', '#', '#', '\n'],
    ['#', ' ', ' ', ' ', '$', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '.', ' ', ' ', ' ', '.', '#', '\n'],
    ['#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#']
    ]

    puzzle_lines5 = [
    ['X', 'X', 'X', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '\n'],
    ['X', 'X', 'X', '#', ' ', '.', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', '#', '#', '#', ' ', ' ', ' ', ' ', ' ', '$', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '@', ' ', ' ', ' ', ' ', '#', '#', '#', '#', '\n'],
    ['#', ' ', ' ', ' ', '$', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '.', ' ', ' ', ' ', '.', '#', '\n'],
    ['#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#']
    ]

    puzzle_lines6 = [
    ['X', 'X', 'X', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '\n'],
    ['X', 'X', 'X', '#', ' ', '.', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', '#', '#', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', ' ', ' ', ' ', ' ', ' ', ' ', '@', ' ', ' ', ' ', ' ', ' ', ' ', '#', '#', '#', '#', '\n'],
    ['#', ' ', ' ', ' ', '$', ' ', ' ', '$', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '.', ' ', ' ', ' ', '.', '#', '\n'],
    ['#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#']
    ]

    puzzle_lines7 = [
    ['X', 'X', 'X', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '\n'],
    ['X', 'X', 'X', '#', ' ', '.', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', '#', '#', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', ' ', ' ', ' ', ' ', ' ', ' ', '@', ' ', ' ', ' ', ' ', ' ', ' ', '#', '#', '#', '#', '\n'],
    ['#', ' ', ' ', ' ', '$', ' ', ' ', '$', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#']
    ]

    puzzle_lines8 = [
    ['X', 'X', 'X', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '\n'],
    ['X', 'X', 'X', '#', ' ', '.', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', '#', '#', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '#', '#', '#', '\n'],
    ['#', ' ', '$', '@', '$', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#']
    ]

    puzzle_lines9 = [
    ['X', 'X', 'X', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '\n'],
    ['X', 'X', 'X', '#', ' ', '.', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', '#', '#', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', '!', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '#', '#', '#', '\n'],
    ['#', ' ', '$', '@', '$', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', '.', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#']
    ]

    puzzle_lines10 = [ #FALLO - NO DEBERIA DE ACEPTAR ESE MOVIMIENTO PORQUE NO PUEDE PASAR POR ENCIMA DE UNA CAJA SOBRE UN OBJETIVO
    ['X', 'X', 'X', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '\n'],
    ['X', 'X', 'X', '#', ' ', '.', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', '#', '#', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', ' ', ' ', ' ', ' ', ' ', ' ', '@', ' ', ' ', ' ', ' ', ' ', ' ', '#', '#', '#', '#', '\n'],
    ['#', ' ', ' ', ' ', '$', ' ', ' ', '$', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '!', ' ', '.', ' ', ' ', ' ', ' ', ' ', '#', '\n'],
    ['#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#']
    ]



if __name__ == '__main__':
    unittest.main()